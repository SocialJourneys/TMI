zk.load('zul.mesh',function(){if(zk._p=zkpi('zul.grid'))try{
zul.grid.Column=zk.$extends(zul.mesh.SortWidget,{getGrid:zul.mesh.HeaderWidget.prototype.getMeshWidget,$init:function(){this.$supers("$init",arguments);this.listen({onGroup:this},-1000)},getMeshBody:function(){var a=this.getGrid();return a?a.rows:null},checkClientSort_:function(b){var a;return !(!(a=this.getMeshBody())||a.hasGroup())&&this.$supers("checkClientSort_",arguments)},group:function(e,s){var v=this.getSortDirection();if(e){if("ascending"==v){return false}}else{if("descending"==v){return false}}var y=e?this._sortAscending:this._sortDescending;if(y=="fromServer"){return false}else{if(y=="none"){s.stop();return false}}var a=this.getMeshWidget();if(!a||a.isModel()||!zk.feature.pe||!zk.isLoaded("zkex.grid")){return false}var q=this.getMeshBody();if(!q){return false}s.stop();var D=q.desktop,x=q.$n();try{q.unbind();if(q.hasGroup()){for(var u=q.getGroups(),C=u.length;--C>=0;){q.removeChild(u[C])}}var E=[],f=this.getChildIndex();for(var B=0,o=0,g=a.getBodyWidgetIterator(),p;(p=g.next());o++){for(var A=0,b=p.firstChild;b;b=b.nextSibling,A++){if(A==f){E[B++]={wgt:b,index:o}}}}var l=v=="ascending"?-1:1,n=this.sorting,r=y=="client(number)";E.sort(function(i,d){var k=n(i.wgt,d.wgt,r)*l;if(k==0){k=(i.index<d.index?-1:1)}return k});for(;q.firstChild;){q.removeChild(q.firstChild)}for(var c,j,h=this.getChildIndex(),B=0,A=E.length;B<A;B++){j=E[B];if(!c||n(c.wgt,j.wgt,r)!=0){var m,b=j.wgt.parent.getChildAt(h);if(b&&b.$instanceof(zul.wgt.Label)){m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:b.getValue()}))}else{var t=b.firstChild;if(t&&t.$instanceof(zul.wgt.Label)){m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:t.getValue()}))}else{m=new zkex.grid.Group();m.appendChild(new zul.wgt.Label({value:msgzul.GRID_OTHER}))}}q.appendChild(m)}q.appendChild(j.wgt.parent);c=j}this._fixDirection(e)}finally{q.replaceHTML(x,D)}return true},setLabel:function(a){this.$supers("setLabel",arguments);if(this.parent){this.parent._syncColMenu()}},setVisible:function(a){if(this.isVisible()!=a){this.$supers("setVisible",arguments);if(this.parent){this.parent._syncColMenu()}}},onGroup:function(a){var b=this.getSortDirection();if("ascending"==b){this.group(false,a)}else{if("descending"==b){this.group(true,a)}else{if(!this.group(true,a)){this.group(false,a)}}}},bind_:function(){this.$supers(zul.grid.Column,"bind_",arguments);var b=this.$n();this.domListen_(b,"onMouseOver").domListen_(b,"onMouseOut");var a=this.$n("btn");if(a){this.domListen_(a,"onClick","_doMenuClick")}},unbind_:function(){var b=this.$n();this.domUnlisten_(b,"onMouseOver").domUnlisten_(b,"onMouseOut");var a=this.$n("btn");if(a){this.domUnlisten_(a,"onClick","_doMenuClick")}this.$supers(zul.grid.Column,"unbind_",arguments)},_doMouseOver:function(a){if(this.isSortable_()||(this.parent._menupopup&&this.parent._menupopup!="none")){jq(this.$n()).addClass(this.getZclass()+"-over");zul.grid.Renderer.updateColumnMenuButton(this)}},_doMouseOut:function(a){if(this.isSortable_()||(this.parent._menupopup&&this.parent._menupopup!="none")){var d=this.$n(),b=jq(d),c=this.getZclass();if(!b.hasClass(c+"-visi")&&(!zk.ie||!jq.isAncestor(d,a.domEvent.relatedTarget||a.domEvent.toElement))){b.removeClass(c+"-over")}}}});
zkreg('zul.grid.Column',true);zk._m={};
zk._m['default']=zul.mesh.HeaderWidget.redraw;
;zkmld(zk._p.p.Column,zk._m);zul.grid.Columns=zk.$extends(zul.mesh.ColumnMenuWidget,{getGrid:zul.mesh.HeadWidget.prototype.getMeshWidget,rerender:function(){if(this.desktop){if(this.parent){this.parent.rerender()}else{this.$supers("rerender",arguments)}}return this},getGroupPackage_:function(){return"zkex.grid"}});
zkreg('zul.grid.Columns');zk._m={};
zk._m['default']=zul.mesh.HeadWidget.redraw;
;zkmld(zk._p.p.Columns,zk._m);zul.grid.Renderer={updateColumnMenuButton:function(b){var c=b.$n(),a;if(a=b.$n("btn")){a.style.height=zk.ie6_||zk.ie7_?c.offsetHeight-1+"px":c.offsetHeight+"px"}}};(function(){function b(e){if(e.desktop){if(e.rows&&e.rows.nChildren){jq(e.$n("empty")).hide().find("td").attr("colspan",1)}else{var d=jq(e.$n("empty")),f=0;if(e.columns){for(var c=e.columns.firstChild;c;c=c.nextSibling){if(c.isVisible()){f++}}}d.find("td").attr("colspan",f||1);d.show()}}e._shallFixEmpty=false}var a=zul.grid.Grid=zk.$extends(zul.mesh.MeshWidget,{$define:{emptyMessage:function(c){if(this.desktop){jq("td",this.$n("empty")).html(c)}}},getCell:function(e,c){var d;if(!(d=this.rows)){return null}if(d.nChildren<=e){return null}var e=d.getChildAt(e);return e.nChildren<=c?null:e.getChildAt(c)},getOddRowSclass:function(){return this._scOddRow==null?this.getZclass()+"-odd":this._scOddRow},setOddRowSclass:function(c){if(!c){c=null}if(this._scOddRow!=c){this._scOddRow=c;var d=this.$n();if(d&&this.rows){this.rows.stripe()}}return this},rerender:function(){this.$supers(a,"rerender",arguments);if(this.rows){this.rows._syncStripe()}return this},getFocusCell:function(g){var d=this.rows.$n();if(jq.isAncestor(d,g)){var f=jq(g).parents("td"),h;for(var e=0,c=f.length;e<c;e++){h=f[e];if(h.parentNode.parentNode==d){return h}}}},insertBefore:function(e,d,c){if(this.$super("insertBefore",e,d,!this.z_rod)){this._fixOnAdd(e,c,c);return true}},appendChild:function(d,c){if(this.$super("appendChild",d,!this.z_rod)){if(!this.insertingBefore_){this._fixOnAdd(d,c,c)}return true}},_fixOnAdd:function(e,d,c){if(e.$instanceof(zul.grid.Rows)){this.rows=e;this._syncEmpty()}else{if(e.$instanceof(zul.grid.Columns)){this.columns=e;this._syncEmpty()}else{if(e.$instanceof(zul.grid.Foot)){this.foot=e}else{if(e.$instanceof(zul.mesh.Paging)){this.paging=e}else{if(e.$instanceof(zul.mesh.Frozen)){this.frozen=e}}}}}if(!d){this.rerender()}if(!c){this._syncSize()}},onChildRemoved_:function(d){this.$supers("onChildRemoved_",arguments);var c;if(d==this.rows){this.rows=null;c=true;this._syncEmpty()}else{if(d==this.columns){this.columns=null;this._syncEmpty()}else{if(d==this.foot){this.foot=null}else{if(d==this.paging){this.paging=null}else{if(d==this.frozen){this.frozen=null}}}}}if(!c&&!this.childReplacing_){this._syncSize()}},redrawEmpty_:function(c){var d=this.uuid,e=this.getZclass();c.push('<tbody id="',d,'-empty" class="',e,'-empty-body" style="display:none"><tr><td>',this._emptyMessage,"</td></tr></tbody>")},bind_:function(f,e,d){this.$supers(a,"bind_",arguments);var c=this;d.push(function(){b(c)})},onResponse:function(){if(this._shallFixEmpty){b(this)}this.$supers(a,"onResponse",arguments)},_syncEmpty:function(){this._shallFixEmpty=true},onChildAdded_:function(c){this.$supers(a,"onChildAdded_",arguments);if(this.childReplacing_){this._fixOnAdd(c,true)}},insertChildHTML_:function(g,e,f){if(g.$instanceof(zul.grid.Rows)){this.rows=g;var d=this.$n("rows");if(d){jq(d).replaceWith(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n().rows;return}else{var c=this.$n("tpad");if(c){jq(c).after(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n().rows;return}else{if(this.ebodytbl){jq(this.ebodytbl).append(g.redrawHTML_());g.bind(f);this.ebodyrows=g.$n().rows;return}}}}this.rerender()},getHeadWidgetClass:function(){return zul.grid.Columns},getBodyWidgetIterator:function(c){return new zul.grid.RowIter(this,c)},hasGroup:function(){return this.rows&&this.rows.hasGroup()}})})();zul.grid.RowIter=zk.$extends(zk.Object,{$init:function(a,b){this.grid=a;this.opts=b},_init:function(){if(!this._isInit){this._isInit=true;var a=this.grid.rows?this.grid.rows.firstChild:null;if(this.opts&&this.opts.skipHidden){for(;a&&!a.isVisible();a=a.nextSibling){}}this.p=a}},hasNext:function(){this._init();return this.p},next:function(){this._init();var b=this.p,a=b?b.nextSibling:null;if(this.opts&&this.opts.skipHidden){for(;a&&!a.isVisible();a=a.nextSibling){}}if(b){this.p=a}return b}});
zkreg('zul.grid.Grid');zk._m={};
zk._m['paging']=function(h){var b=this.uuid,e=this.getZclass(),k=this.getInnerWidth(),l=k=="100%"?' width="100%"':"",c=k!="100%"?"width:"+k:"",a=this.inPagingMold(),d;h.push("<div",this.domAttrs_(),">");if(a&&this.paging){d=this.getPagingPosition();if(d=="top"||d=="both"){h.push('<div id="',b,'-pgit" class="',e,'-pgi-t">');this.paging.redraw(h);h.push("</div>")}}if(this.columns){h.push('<div id="',b,'-head" class="',e,'-header">',"<table",l,zUtl.cellps0,' style="table-layout:fixed;',c,'">');this.domFaker_(h,"-hdfaker",e);for(var m=this.heads,g=0,i=m.length;g<i;){m[g++].redraw(h)}h.push('</table></div><div class="',e,'-header-bg"></div>')}h.push('<div id="',b,'-body" class="',e,"-body");if(this._autopaging){h.push(" ",e,"-autopaging")}h.push('"');var f=this.getHeight();if(f){h.push(' style="height:',f,'"')}h.push(">");if(this.rows&&this.domPad_&&!this.inPagingMold()){this.domPad_(h,"-tpad")}h.push("<table",l,zUtl.cellps0,' style="table-layout:fixed;',c,'">');if(this.columns){this.domFaker_(h,"-bdfaker",e)}if(this.rows){this.rows.redraw(h)}this.redrawEmpty_(h);h.push("</table>");if(this.rows&&this.domPad_&&!this.inPagingMold()){this.domPad_(h,"-bpad")}h.push("</div>");if(this.foot){h.push('<div id="',b,'-foot" class="',e,'-footer">',"<table",l,zUtl.cellps0,' style="table-layout:fixed;',c,'">');if(this.columns){this.domFaker_(h,"-ftfaker",e)}this.foot.redraw(h);h.push("</table></div>")}if(this.frozen){h.push('<div id="',b,'-frozen" class="',e,'-frozen">');this.frozen.redraw(h);h.push("</div>")}if(d=="bottom"||d=="both"){h.push('<div id="',b,'-pgib" class="',e,'-pgi-b">');this.paging.redraw(h);h.push("</div>")}h.push("</div>")};
;zk._m['default']=[zk._p.p.Grid,'paging'];zkmld(zk._p.p.Grid,zk._m);(function(){function a(){return zk.feature.pe&&zk.isLoaded("zkex.grid")}function b(e,c){var d=e;setTimeout(function(){if(!d.desktop){return}var g=jq(d.$n()),h=d.getZclass()+"-over";if(c){g.removeClass(h)}else{if(d._musin){g.addClass(h);var f=d.parent._musout;if(f&&g[0]!=f.$n()){jq(f.$n()).removeClass(h);f._musin=false;d.parent._musout=null}}}})}zul.grid.Row=zk.$extends(zul.Widget,{$define:{align:function(c){var d=this.$n();if(d){d.align=c}},nowrap:function(c){var e=this.$n();if(e&&(e=e.cells)){for(var d=e.length;d--;){e[d].noWrap=c}}},valign:function(c){var d=this.$n();if(d){d.vAlign=c}}},getGrid:function(){return this.parent?this.parent.parent:null},setVisible:function(c){if(this.isVisible()!=c){this.$supers("setVisible",arguments);if(c&&this.isStripeable_()&&this.parent){this.parent.stripe()}}},getSpans:function(){return zUtl.intsToString(this._spans)},setSpans:function(c){if(this.getSpans()!=c){this._spans=zUtl.stringToInts(c,1);this.rerender()}},_getIndex:function(){return this.parent?this.getChildIndex():-1},getGroup:function(){if(a()&&this.parent&&this.parent.hasGroup()){for(var c=this;c;c=c.previousSibling){if(c.$instanceof(zkex.grid.Group)){return c}}}return null},setStyle:function(c){if(this._style!=c){if(!zk._rowTime){zk._rowTime=jq.now()}this._style=c;this.rerender()}},rerender:function(){if(this.desktop){this.$supers("rerender",arguments);if(this.parent){this.parent._syncStripe()}}},getSclass:function(){var d=this.$supers("getSclass",arguments);if(d!=null){return d}var c=this.getGrid();return c?c.getSclass():d},_getChdextr:function(c){return c.$n("chdextr")||c.$n()},insertChildHTML_:function(e,c,d){if(c){jq(this._getChdextr(c)).before(this.encloseChildHTML_({child:e,index:e.getChildIndex(),zclass:this.getZclass(),cls:"z-overflow-hidden"}))}else{jq(this).append(this.encloseChildHTML_({child:e,index:e.getChildIndex(),zclass:this.getZclass(),cls:"z-overflow-hidden"}))}e.bind(d)},removeChildHTML_:function(c){this.$supers("removeChildHTML_",arguments);jq(c.uuid+"-chdextr",zk).remove()},encloseChildHTML_:function(e){var d=e.out||[],f=e.child,c=f.$instanceof(zul.wgt.Cell);if(!c){d.push('<td id="',f.uuid,'-chdextr"',this._childAttrs(f,e.index),">",'<div id="',f.uuid,'-cell" class="',e.zclass,"-cnt ",e.cls,'">')}f.redraw(d);if(!c){d.push("</div></td>")}if(!e.out){return d.join("")}},_childAttrs:function(f,q){var m=q,t=1;if(this._spans){for(var p=0,n=this._spans.length;p<n;++p){if(p==q){t=this._spans[p];break}m+=this._spans[p]-1}}var o,l,i,c=this.getGrid();if(c){var s=c.columns;if(s){if(m<s.nChildren){var g=s.getChildAt(m);o=g.getColAttrs();l=g.isVisible()?"":"display:none";i=g.getHeight()}}}var d=this.domStyle_({visible:1,width:1,height:1}),e=zk.isLoaded("zkex.grid")&&f.$instanceof(zkex.grid.Detail);if(e){var h=f.getWidth();if(h){d+="width:"+h+";"}}if(l||i){d+=l;if(i){d+="height:"+i+";"}}var r=e?f.getZclass()+"-outer":this.getZclass()+"-inner",u=o||"";if(t!==1){u+=' colspan="'+t+'"'}if(this._nowrap){u+=' nowrap="nowrap"'}if(d){u+=' style="'+d+'"'}return u+' class="'+r+'"'},isStripeable_:function(){return true},domStyle_:function(e){if((a()&&(this.$instanceof(zkex.grid.Group)||this.$instanceof(zkex.grid.Groupfoot)))||(e&&e.visible)){return this.$supers("domStyle_",arguments)}var c=this.$supers("domStyle_",arguments),d=this.getGroup();return d&&!d.isOpen()?c+"display:none;":c},onChildAdded_:function(c){this.$supers("onChildAdded_",arguments);if(c.$instanceof(zul.grid.Detail)){this.detail=c}},onChildRemoved_:function(c){this.$supers("onChildRemoved_",arguments);if(c==this.detail){this.detail=null}},doFocus_:function(c){this.$supers("doFocus_",arguments);var g,k,e,l,h;if((g=this.getGrid())&&g.efrozen&&(k=zk.Widget.$(g.efrozen.firstChild))&&g.rows&&(e=g.rows.$n())){h=jq(c.domTarget).parents("td");for(var f=0,d=h.length;f<d;f++){l=h[f];if(l.parentNode.parentNode==e){g._moveToHidingFocusCell(l.cellIndex);break}}}},doMouseOver_:function(c){if(this._musin){return}this._musin=true;var d=this.$n();if(d&&zk.gecko&&this._draggable&&!jq.nodeName(c.domTarget,"input","textarea")){d.firstChild.style.MozUserSelect="none"}b(this);this.$supers("doMouseOver_",arguments)},doMouseOut_:function(c){var d=this.$n();if((this._musin&&jq.isAncestor(d,c.domEvent.relatedTarget||c.domEvent.toElement))){this.parent._musout=this;return}this._musin=false;if(d&&zk.gecko&&this._draggable){d.firstChild.style.MozUserSelect="none"}b(this,true);this.$supers("doMouseOut_",arguments)},domAttrs_:function(d){var c=this.$supers("domAttrs_",arguments);if(this._align){c+=' align="'+this._align+'"'}if(this._valign){c+=' valign="'+this._valign+'"'}return c},domClass_:function(){var c=this.$supers("domClass_",arguments),d=this.getGrid();if(d&&jq(this.$n()).hasClass(d=d.getOddRowSclass())){return c+" "+d}return c},deferRedrawHTML_:function(c){c.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}})})();
zkreg('zul.grid.Row');zk._m={};
zk._m['default']=function(c){c.push("<tr",this.domAttrs_(),">");var d=this.getZclass();for(var b=0,a=this.firstChild;a;a=a.nextSibling,b++){this.encloseChildHTML_({child:a,index:b,zclass:d,cls:"z-overflow-hidden",out:c})}c.push("</tr>")};
;zkmld(zk._p.p.Row,zk._m);(function(){function c(){return zk.feature.pe&&zk.isLoaded("zkex.grid")}function a(d){if((d=d.getGrid())&&(d=d.frozen)){d._syncFrozen()}}var b=zul.grid.Rows=zk.$extends(zul.Widget,{_visibleItemCount:0,$init:function(){this.$supers("$init",arguments);this._groupsInfo=[]},$define:{visibleItemCount:null},getGrid:function(){return this.parent},getGroupCount:function(){return this._groupsInfo.length},getGroups:function(){return this._groupsInfo.$clone()},hasGroup:function(){return this._groupsInfo.length},bind_:function(g,f,e){this.$supers(b,"bind_",arguments);zWatch.listen({onResponse:this});var d=this;e.push(function(){d.stripe();a(d)})},unbind_:function(){zWatch.unlisten({onResponse:this});this.$supers(b,"unbind_",arguments)},onResponse:function(){if(this.desktop){if(this._shallStripe){this.stripe();this.getGrid().onSize()}}},_syncStripe:function(){this._shallStripe=true},stripe:function(){var g=this.getGrid(),d=g.getOddRowSclass();if(!d){return}var i=this.$n();if(!i){return}for(var f=0,e=this.firstChild,h=!(this._offset&1);e;e=e.nextSibling,++f){if(e.isVisible()&&e.isStripeable_()){for(;i.rows[f]&&i.rows[f].id!=e.uuid;++f){}jq(i.rows[f])[h?"removeClass":"addClass"](d);e.fire("onStripe");h=!h}}this._shallStripe=false},onChildAdded_:function(e){this.$supers("onChildAdded_",arguments);if(c()&&e.$instanceof(zkex.grid.Group)){this._groupsInfo.push(e)}var d;if((d=this.getGrid())){if(d.fixForRowAdd_){d.fixForRowAdd_()}d._syncEmpty()}this._syncStripe();if(this.desktop){a(this)}},onChildRemoved_:function(e){this.$supers("onChildRemoved_",arguments);if(c()&&e.$instanceof(zkex.grid.Group)){this._groupsInfo.$remove(e)}if(!this.childReplacing_){this._syncStripe()}var d=this.getGrid();if(d){d._syncEmpty()}},deferRedrawHTML_:function(d){d.push("<tbody",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tbody>')}})})();
zkreg('zul.grid.Rows');zk._m={};
zk._m['default']=function(b){b.push("<tbody",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tbody>")};
;zkmld(zk._p.p.Rows,zk._m);zul.grid.Foot=zk.$extends(zul.Widget,{getGrid:function(){return this.parent},setVflex:function(a){a=false;this.$super(zul.grid.Foot,"setVflex",a)},setHflex:function(a){a=false;this.$super(zul.grid.Foot,"setHflex",a)},deferRedrawHTML_:function(a){a.push("<tr",this.domAttrs_({domClass:1}),' class="z-renderdefer"></tr>')}});
zkreg('zul.grid.Foot');zk._m={};
zk._m['default']=function(b){b.push("<tr",this.domAttrs_(),">");for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</tr>")};
;zkmld(zk._p.p.Foot,zk._m);zul.grid.Footer=zk.$extends(zul.mesh.FooterWidget,{getGrid:function(){return this.getMeshWidget()},getColumn:function(){return this.getHeaderWidget()}});
zkreg('zul.grid.Footer',true);zk._m={};
zk._m['default']=function(b){b.push("<td",this.domAttrs_(),'><div id="',this.uuid,'-cave" class="',this.getZclass(),'-cnt">',this.domContent_());for(var a=this.firstChild;a;a=a.nextSibling){a.redraw(b)}b.push("</div></td>")};
;zkmld(zk._p.p.Footer,zk._m);
}finally{zk.setLoaded(zk._p.n);}});zk.setLoaded('zul.grid',1);